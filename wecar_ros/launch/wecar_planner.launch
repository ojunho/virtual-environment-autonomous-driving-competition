<launch>
    <!-- Extended Kalman Filter -->
    <arg name="ekf" default="true"/>
    
    <!-- for the TF settings-->
    <node pkg='tf2_ros' type="static_transform_publisher" name="base_link_to_imu" 
        args='0.0 0.0 0.12 0.0 0.0 0.0 1.0 base_link imu'/>
        
    <node pkg='tf2_ros' type="static_transform_publisher" name="base_link_to_lidar"
        args='0.11 0.0 0.13 0.0 0.0 0.0 1.0 base_link lidar'/>

    <node pkg='tf2_ros' type="static_transform_publisher" name="base_link_to_camera"
        args='0.3 0.0 0.11 0.0 0.0 0.0 1.0 base_link Camera'/>

    <!-- LiDAR Object Dection-->
   <include file="$(find obstacle_detection)/launch/obstacle_detection.launch"/>

    <!-- odometery -->
    <include file="$(find racecar)/launch/teleop.launch"/>
    <group if="$(arg ekf)">
        <include file="$(find robot_localization)/launch/dual_ekf_navsat_example.launch"/>
    </group>
    <group unless="$(arg ekf)">
        <node pkg="wecar_ros" type="pub_odom.py" name="pub_odom"/>
    </group>

    <!-- load map -->
    <arg name = "map_file" default="$(find wecar_ros)/maps/map.yaml"/>
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)"/>

    <!-- localization -->
    <include file="$(find wego_2d_nav)/launch/amcl.launch"/>
    <include file="$(find wego_2d_nav)/launch/move_base.launch"/>

    <!-- Control-->
    <!-- <node pkg="wecar_ros" type="wecar_planner.py" name="wecar_planner" output="screen"/> -->
    <node pkg="wecar_ros" type="navigation_client.py" name="navigation_client" /> 
    <node pkg="lane_detection" type="lane_detection.py" name="lane_detection" output="screen"/>

     
    <!-- visualization -->
    
    <!-- <node name="rviz" pkg="rviz" type="rviz" args="-d $(find wecar_ros)/rviz/display.rviz"/> -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find wecar_ros)/rviz/slam_test.rviz"/>
	<!-- <node pkg="rviz" type="rviz" name="rviz" args="-d $(find obstacle_detection)/rviz/obstacle_detection.rviz" /> -->

</launch>
 
